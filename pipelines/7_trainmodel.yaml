pipeline:
  name: train_model
description: "Run the Brain MRI Training Experiment on MLDE"
input:
  pfs:
    glob: "/*[!_report]"
    repo: resize_images
    name: data
    branch: master
    empty_files: true
transform:
  cmd: ["/bin/sh"]
  stdin: ["python train.py --git-url https://git@github.com/denisabrantes/pdk_workshop_brainmri.git --git-ref main --sub-dir experiment --config const.yaml --workspace denisd --mlde_project denisd-brain-mri --repo resize_images --model brain-mri-ws --project denisd-brain-mri-ws --incremental false"]
  image: pachyderm/pdk:train-v0.0.1
secrets:
  - name: pipeline-secret
    key: det_master
    env_var: DET_MASTER
  - name: pipeline-secret
    key: det_user
    env_var: DET_USER
  - name: pipeline-secret
    key: det_password
    env_var: DET_PASSWORD
  - name: pipeline-secret
    key: pac_token
    env_var: PAC_TOKEN
autoscaling: true
